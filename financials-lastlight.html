<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kato.8 Studios — Last Light Financial Breakdown</title>
  <style>
    :root{
      --bg:#07070b;
      --panel:#0f0f18;
      --panel2:#0c0c14;
      --text:#f3f3ff;
      --muted:#b9b9d6;
      --line:rgba(255,255,255,.12);
      --accent:#ff4fd8;
      --accent2:#6be4ff;
      --good:#8dffb3;
      --warn:#ffd36b;
      --bad:#ff7a7a;
      --shadow: 0 18px 40px rgba(0,0,0,.45);
      --radius:18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(900px 500px at 20% -10%, rgba(255,79,216,.20), transparent 65%),
                  radial-gradient(900px 500px at 85% 0%, rgba(107,228,255,.16), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.35;
    }
    .wrap{ max-width:1100px; margin:0 auto; padding:44px 18px 70px; }

    .sitehdr{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      margin-bottom:18px;
      padding:12px 14px;
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(0,0,0,.18);
    }
    .brand{ display:flex; flex-direction:column; gap:2px; }
    .brand .name{
      font-weight:900; letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }
    .spark{
      width:10px; height:10px; border-radius:999px;
      background: var(--accent);
      box-shadow:0 0 18px rgba(255,79,216,.45);
      display:inline-block;
    }
    .brand .tag{ font-size:12px; color:var(--muted); }
    .nav{
      display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-end;
      align-items:center;
    }
    .nav a{
      color:var(--muted);
      font-size:13px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
      text-decoration:none;
    }
    .nav a:hover{
      color:var(--text);
      border-color: rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }

    .top{
      display:flex; flex-wrap:wrap; gap:14px;
      align-items:flex-end; justify-content:space-between;
      margin-bottom:18px;
    }
    h1{
      margin:0;
      font-size: clamp(26px, 3vw, 40px);
      letter-spacing:.2px;
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      max-width:850px;
      font-size: 15px;
    }
    .badge-row{ display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; }
    .badge{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      display:inline-flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .dot{ width:8px; height:8px; border-radius:999px; background:var(--accent); box-shadow:0 0 14px rgba(255,79,216,.45); }
    .dot2{ background:var(--accent2); box-shadow:0 0 14px rgba(107,228,255,.35); }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:14px;
      margin-top:18px;
    }
    @media (max-width: 920px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding:16px 16px 12px;
      border-bottom:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,79,216,.10), rgba(255,255,255,0));
    }
    .card .bd{ padding:16px; }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    .pillset{
      display:flex;
      border:1px solid var(--line);
      background: rgba(0,0,0,.25);
      border-radius:999px;
      overflow:hidden;
    }
    .pill{
      padding:10px 12px;
      font-size:13px;
      cursor:pointer;
      color:var(--muted);
      background:transparent;
      border:0;
    }
    .pill[aria-selected="true"]{
      color:var(--text);
      background: linear-gradient(180deg, rgba(255,79,216,.20), rgba(255,255,255,.02));
    }
    select{
      appearance:none;
      border-radius:12px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.25);
      color:var(--text);
      padding:10px 12px;
      font-size:13px;
      outline:none;
    }
    .kpis{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:14px;
    }
    @media (max-width: 560px){ .kpis{ grid-template-columns: 1fr; } }
    .kpi{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      background: rgba(0,0,0,.22);
    }
    .kpi .lbl{ font-size:12px; color:var(--muted); }
    .kpi .val{ margin-top:6px; font-size:18px; font-weight:700; letter-spacing:.2px; }
    .kpi .hint{ margin-top:6px; font-size:12px; color:var(--muted); }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
      font-size:13px;
    }
    th, td{
      text-align:left;
      padding:10px 8px;
      border-bottom:1px solid var(--line);
      vertical-align:top;
    }
    th{ color:var(--muted); font-weight:600; font-size:12px; letter-spacing:.2px; }
    tr:last-child td{ border-bottom:0; }

    .money{
      font-variant-numeric: tabular-nums;
      white-space:nowrap;
      font-weight:650;
      font-family: var(--mono);
    }
    .note{
      margin-top:12px;
      color:var(--muted);
      font-size:12px;
    }
    .callout{
      border:1px dashed rgba(255,79,216,.45);
      background: rgba(255,79,216,.07);
      padding:12px;
      border-radius:16px;
      color:var(--muted);
      font-size:12px;
      margin-top:12px;
    }
    .callout strong{ color:var(--text); }

    .list{ margin:0; padding-left:18px; color:var(--muted); font-size:13px; }
    .list li{ margin:8px 0; }

    .footer{
      margin-top:18px;
      color:var(--muted);
      font-size:12px;
      border-top:1px solid var(--line);
      padding-top:14px;
    }

    .fieldgrid{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 980px){ .fieldgrid{ grid-template-columns: 1fr 1fr; } }
    @media (max-width: 520px){ .fieldgrid{ grid-template-columns: 1fr; } }
    .field{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      background: rgba(0,0,0,.22);
    }
    .field label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }
    .field input{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color:var(--text);
      padding:10px 12px;
      font-size:13px;
      outline:none;
      font-family: var(--mono);
    }
    .btn{
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,79,216,.22), rgba(255,255,255,.03));
      color:var(--text);
      padding:10px 12px;
      font-weight:800;
      letter-spacing:.2px;
      cursor:pointer;
      font-size:13px;
    }
    .btn:hover{ border-color: rgba(255,255,255,.28); }

    .twocol{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 920px){ .twocol{ grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">

    <div class="sitehdr">
      <div class="brand">
        <div class="name"><span class="spark"></span> <a href="index.html" style="color:var(--text); text-decoration:none;">Kato.8 Studios LLC</a></div>
        <div class="tag">Retro × Modern — in gameplay and aesthetics</div>
      </div>
      <div class="nav">
        <a href="games.html">Games</a>
        <a href="updates.html">Updates</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>

    <div class="top">
      <div>
        <h1>Last Light — Financial Breakdown</h1>
        <p class="sub">
          Investor-ready planning for (1) a <b>Demo</b> (10–15 minute vertical slice) and (2) a scalable <b>Full Game</b> release.
          This page ties budget → milestones → revenue → break-even to keep expectations grounded and measurable.
        </p>
        <div class="badge-row">
          <div class="badge"><span class="dot"></span> Milestone-based spend (validation before scale)</div>
          <div class="badge"><span class="dot dot2"></span> Conservative assumptions (fees + marketing included)</div>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: INTERACTIVE BREAKDOWN -->
      <div class="card">
        <div class="hd">
          <div class="controls">
            <div class="pillset" role="tablist" aria-label="Budget type">
              <button class="pill" id="tab-demo" role="tab" aria-selected="true">Demo</button>
              <button class="pill" id="tab-full" role="tab" aria-selected="false">Full Game</button>
            </div>
            <select id="scenario"></select>
          </div>

          <div class="kpis">
            <div class="kpi">
              <div class="lbl">Budget Range</div>
              <div class="val" id="kpiBudget">$—</div>
              <div class="hint">Total estimate (range)</div>
            </div>
            <div class="kpi">
              <div class="lbl">Timeline</div>
              <div class="val" id="kpiTimeline">—</div>
              <div class="hint">Calendar months</div>
            </div>
            <div class="kpi">
              <div class="lbl">Team Model</div>
              <div class="val" id="kpiTeam">—</div>
              <div class="hint">Lean core + contractors</div>
            </div>
          </div>
        </div>

        <div class="bd">
          <div id="summary"></div>

          <table aria-label="Line item budget table">
            <thead>
              <tr>
                <th style="width:46%">Cost Category</th>
                <th style="width:22%">Low</th>
                <th style="width:22%">High</th>
                <th style="width:10%">Notes</th>
              </tr>
            </thead>
            <tbody id="lines"></tbody>
          </table>

          <div class="callout" id="callout"></div>
          <div class="note" id="note"></div>
        </div>
      </div>

      <!-- RIGHT: INVESTOR-FACING NOTES -->
      <div class="card">
        <div class="hd">
          <div style="font-weight:700">Use of funds & milestone gates</div>
          <div style="color:var(--muted); font-size:12px; margin-top:6px">
            What capital buys at each stage, and how progress is validated.
          </div>
        </div>

        <div class="bd">
          <ul class="list">
            <li><b>Gate 1 — Demo / Vertical Slice:</b> playable loop, presentable art direction, onboarding, and a pitch-ready build for festivals and community testing.</li>
            <li><b>Gate 2 — Alpha:</b> core systems implemented, content pipeline proven, feature set locked (no new systems after this point).</li>
            <li><b>Gate 3 — Beta:</b> content complete, balance pass, performance work, and QA ramp to stabilize for launch.</li>
            <li><b>Gate 4 — Release Candidate:</b> bug-fix only; marketing beats and store assets finalized.</li>
          </ul>

          <div class="callout">
            <strong>Investor clarity:</strong> budgets are <b>ranges</b> because contractor rates, asset scope, and polish depth vary.
            Contingency is included explicitly to prevent surprise overages.
          </div>

          <div class="footer">
            This page is meant to be “pitch-clean”: every number ties to a deliverable, and every deliverable ties to de-risking the next spend.
          </div>
        </div>
      </div>
    </div>

    <!-- INVESTOR SNAPSHOT -->
    <div class="card" style="margin-top:14px;">
      <div class="hd">
        <div style="font-weight:900; letter-spacing:.2px">Investor Snapshot</div>
        <div style="color:var(--muted); font-size:12px; margin-top:6px">
          A quick read on scope, pricing, and break-even thresholds.
        </div>
      </div>
      <div class="bd">
        <div class="twocol">
          <div>
            <div style="font-weight:800; margin-bottom:6px;">Revenue Model</div>
            <ul class="list">
              <li><b>Platform:</b> Steam (PC-first)</li>
              <li><b>Pricing:</b> Demo free; full release <b>$5</b> (premium indie impulse-buy tier)</li>
              <li><b>Platform fee assumption:</b> 30%</li>
              <li><b>Net revenue per unit (at $5):</b> ~$3.50 before variable marketing</li>
            </ul>
          </div>
          <div>
            <div style="font-weight:800; margin-bottom:6px;">Break-even Targets (at $5, 30% platform fee)</div>
            <table aria-label="Break-even targets">
              <thead>
                <tr>
                  <th>Scope</th>
                  <th>Budget Range</th>
                  <th>Units to Recoup (net/unit ≈ $3.50)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Demo</td>
                  <td class="money">$27,000 – $50,000</td>
                  <td class="money">~7,715 – 14,286</td>
                </tr>
                <tr>
                  <td>Full Game</td>
                  <td class="money">$130,000 – $210,000</td>
                  <td class="money">~37,143 – 60,000</td>
                </tr>
              </tbody>
            </table>
            <div class="note">These break-even units are a simple, investor-friendly baseline. The forecast section below models platform fees + marketing over time.</div>
          </div>
        </div>
      
    <!-- FUNDED BY HOTDOG HUSTLER -->
    <div class="card" style="margin-top:14px;">
      <div class="hd">
        <div style="font-weight:900; letter-spacing:.2px">Funding Path: Hotdog Hustler → Last Light</div>
        <div style="color:var(--muted); font-size:12px; margin-top:6px">
          Last Light is milestone-funded. Early revenue from Hotdog Hustler can fund the demo (vertical slice) to validate the loop before scaling production.
        </div>
      </div>
      <div class="bd">
        <div class="callout" style="margin-top:0;">
          <strong>Investor framing:</strong> Internal demo funding reduces dependency on upfront investment and improves publisher/investor leverage once the vertical slice is playable, presentable, and publicly testable.
        </div>

        <div class="twocol" style="margin-top:14px;">
          <div>
            <div style="font-weight:800; margin-bottom:6px;">How the Funnel De-Risks Last Light</div>
            <ul class="list">
              <li><b>Capital efficiency:</b> Hotdog Hustler ships faster at smaller scope to prove execution + monetization first.</li>
              <li><b>Validation gate:</b> no full-production scaling until the demo is complete (playable + stable + pitch-ready).</li>
              <li><b>Stronger terms:</b> demo + Steam page + trailer supports better publisher/investor conversations.</li>
            </ul>
          </div>

          <div>
            <div style="font-weight:800; margin-bottom:6px;">Demo Funding Target</div>
            <table aria-label="Demo funding target">
              <thead>
                <tr>
                  <th>Target</th>
                  <th>Low</th>
                  <th>High</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Vertical Slice Demo</td>
                  <td class="money">$27,000</td>
                  <td class="money">$50,000</td>
                </tr>
              </tbody>
            </table>
            <div class="note">These targets align with the demo scenarios on this page.</div>
          </div>
        </div>

        <div style="font-weight:800; margin:14px 0 6px;">Inbound Funding Estimator (from Hotdog Hustler)</div>
        <div class="fieldgrid">
          <div class="field">
            <label>HH Studio Revenue ($)</label>
            <input id="llhh_studioRev" type="number" min="0" step="500" value="50000" />
          </div>
          <div class="field">
            <label>Allocate to Last Light (%)</label>
            <input id="llhh_alloc" type="number" min="0" max="100" step="1" value="70" />
          </div>
          <div class="field">
            <label>Demo Target</label>
            <select id="llhh_target">
              <option value="27000">Demo Low ($27k)</option>
              <option value="50000" selected>Demo High ($50k)</option>
            </select>
          </div>
          <div class="field">
            <label>Notes</label>
            <input id="llhh_note" type="text" value="Directional gate check (not a full P&L)" />
          </div>
        </div>

        <div class="kpis" style="margin-top:14px;">
          <div class="kpi">
            <div class="lbl">Allocated to Last Light</div>
            <div class="val" id="llhh_toLL">$—</div>
            <div class="hint">HH studio revenue × allocation</div>
          </div>
          <div class="kpi">
            <div class="lbl">Funding Gap</div>
            <div class="val" id="llhh_gap">$—</div>
            <div class="hint">Target – allocated</div>
          </div>
          <div class="kpi">
            <div class="lbl">Gate Status</div>
            <div class="val" id="llhh_status">—</div>
            <div class="hint">Meets demo funding threshold?</div>
          </div>
        </div>

        <div class="note">
          If this gate is met, the demo can begin immediately under the milestone-based plan described above. If not, the studio can either (a) continue funding via Hotdog Hustler, or (b) raise a smaller, validation-only tranche.
        </div>
      </div>
    </div>

</div>
    </div>

    <!-- MARKET & COMPETITIVE -->
    <div class="card" style="margin-top:14px;">
      <div class="hd">
        <div style="font-weight:900; letter-spacing:.2px">Market & Competitive Positioning</div>
        <div style="color:var(--muted); font-size:12px; margin-top:6px">
          Where Last Light fits, and how it differentiates without overscoping.
        </div>
      </div>
      <div class="bd">
        <div class="twocol">
          <div>
            <div style="font-weight:800; margin-bottom:6px;">Genre Fit</div>
            <ul class="list">
              <li>Survival + resource gathering + base defense loop.</li>
              <li>“Cozy systems” meets “pressure moments” (waves / threats).</li>
              <li>Strong long-tail potential if core loop is satisfying and scalable with content updates.</li>
            </ul>
          </div>
          <div>
            <div style="font-weight:800; margin-bottom:6px;">Comparable Titles (qualitative)</div>
            <ul class="list">
              <li><b>Stardew Valley</b> (system-driven retention + progression)</li>
              <li><b>They Are Billions</b> / base-defense pressure loop</li>
              <li><b>Graveyard Keeper</b> (resource chains + crafting progression)</li>
              <li><b>Project Zomboid</b> (survival tension + emergent stories)</li>
            </ul>
            <div class="note">Comparable titles listed for category clarity only (no sales claims here). The demo’s job is to prove the hook and retention inside this market lane.</div>
          </div>
        </div>

        <div class="callout">
          <strong>Differentiation thesis:</strong> A tight “gather → fortify → survive → upgrade” loop with a retro-modern presentation,
          built to be digestible at a low price point while leaving room to expand content post-launch.
        </div>
      </div>
    </div>

    <!-- RISK -->
    <div class="card" style="margin-top:14px;">
      <div class="hd">
        <div style="font-weight:900; letter-spacing:.2px">Risk Management</div>
        <div style="color:var(--muted); font-size:12px; margin-top:6px">
          How scope, staffing, and funding gaps are controlled.
        </div>
      </div>
      <div class="bd">
        <div class="twocol">
          <div>
            <div style="font-weight:800; margin-bottom:6px;">Key Risks</div>
            <ul class="list">
              <li><b>Scope creep:</b> adding systems late increases cost disproportionately.</li>
              <li><b>Funding gaps:</b> partial funding can cause stop-start inefficiency.</li>
              <li><b>Content throughput:</b> art/content can bottleneck engineering progress.</li>
              <li><b>Go-to-market risk:</b> weak store assets / timing reduces conversion.</li>
            </ul>
          </div>
          <div>
            <div style="font-weight:800; margin-bottom:6px;">Mitigations</div>
            <ul class="list">
              <li><b>Milestone gates:</b> demo → alpha → beta → release candidate.</li>
              <li><b>Feature lock:</b> no new systems after Alpha gate.</li>
              <li><b>Contractor flexibility:</b> scale art/audio/QA up or down by milestone needs.</li>
              <li><b>Contingency:</b> explicit buffer line item in every budget.</li>
            </ul>
          </div>
        </div>

        <div class="callout">
          <strong>Kill criteria (capital protection):</strong> If the demo fails to hit playability + retention benchmarks, the plan pivots to
          reduced scope (ship smaller) rather than expanding spend to “fix it later.”
        </div>
      </div>
    </div>

    <!-- FORECASTING -->
    <div class="card" style="margin-top:14px;">
      <div class="hd">
        <div style="font-weight:900; letter-spacing:.2px">Forecasting (Revenue + Break-even)</div>
        <div style="color:var(--muted); font-size:12px; margin-top:6px">
          A lightweight 12-month model to estimate units needed to recoup the selected budget range.
          This is directional and intentionally simple (platform fee + marketing only).
        </div>
      </div>
      <div class="bd">
        <div class="fieldgrid">
          <div class="field">
            <label>Game Price ($)</label>
            <input id="f_price" type="number" min="0" step="0.5" value="5" />
          </div>
          <div class="field">
            <label>Platform Fee (%)</label>
            <input id="f_platform" type="number" min="0" max="100" step="0.5" value="30" />
          </div>
          <div class="field">
            <label>Marketing % of Gross</label>
            <input id="f_mktpct" type="number" min="0" max="100" step="0.5" value="10" />
          </div>
          <div class="field">
            <label>Fixed Launch Marketing ($)</label>
            <input id="f_mktfixed" type="number" min="0" step="500" value="5000" />
          </div>

          <div class="field">
            <label>Month 1 Units (Base)</label>
            <input id="f_m1" type="number" min="0" step="100" value="12000" />
          </div>
          <div class="field">
            <label>Monthly Decay (%)</label>
            <input id="f_decay" type="number" min="0" max="50" step="0.5" value="8" />
          </div>
          <div class="field">
            <label>Scenario Spread (%)</label>
            <input id="f_spread" type="number" min="0" max="60" step="1" value="25" />
          </div>
          <div class="field" style="display:flex; align-items:end;">
            <button class="btn" id="f_csv" type="button" style="width:100%;">Download Forecast CSV</button>
          </div>
        </div>

        <div class="callout" id="f_summary" style="margin-top:12px;">
          <strong>Summary:</strong> —
        </div>

        <table aria-label="Forecast table">
          <thead>
            <tr>
              <th>Month</th>
              <th>Scenario</th>
              <th>Units</th>
              <th>Gross</th>
              <th>Marketing</th>
              <th>Net (after platform + marketing)</th>
              <th>Cumulative Net</th>
              <th>Break-even vs Selected Budget (Low)</th>
            </tr>
          </thead>
          <tbody id="f_rows"></tbody>
        </table>

        <div class="note">
          Notes: This model excludes payroll/tax overhead and assumes marketing is captured via the inputs above.
          Use it as an investor-facing directional view, not a full P&L.
        </div>
      </div>
    </div>

  </div>

  <script>
    // ----------
    // helpers
    // ----------
    const money = (n) => {
      if (n === null || n === undefined || !isFinite(n)) return "—";
      return "$" + n.toLocaleString("en-US", { maximumFractionDigits: 0 });
    };

    // ----------
    // DATA (Realistic indie ranges, aligned to prior planning)
    // ----------
    const demoScenarios = [
      {
        id: "demo_conservative",
        name: "Demo — Conservative (Min viable slice)",
        budgetLow: 27000,
        budgetHigh: 35000,
        timeline: "3 months",
        team: "Founder-led + 2–3 contractors",
        summary: `
          <p style="margin:0 0 8px; color:var(--muted); font-size:13px">
            Minimum viable vertical slice: prove the core loop, art direction, and a stable PC build suitable for early playtests.
          </p>
          <ul class="list">
            <li>One biome, limited enemy variety, basic UI + audio pass</li>
            <li>Store page + “trailer-lite” for early visibility</li>
          </ul>
        `,
        lines: [
          { cat: "Labor (Dev + Design)", low: 12000, high: 18000, note: "Founder-heavy" },
          { cat: "Labor (2D Art + UI)", low: 6000, high: 9000, note: "Core visuals" },
          { cat: "Audio (contract)", low: 1000, high: 2000, note: "SFX + basic music" },
          { cat: "QA (limited contract)", low: 1000, high: 2000, note: "Final checks" },
          { cat: "Tools / Software", low: 800, high: 1600, note: "Licenses/assets" },
          { cat: "Marketing / Store Assets", low: 1200, high: 2400, note: "Capsule/trailer-lite" },
          { cat: "Overhead + Contingency", low: 5000, high: 8000, note: "10–15% buffer" },
        ],
        callout: "Best for: fastest validation and early traction with minimal burn.",
        note: "Ranges reflect lean indie contractor rates and founder contribution. Adjust line items as vendors are quoted."
      },
      {
        id: "demo_base",
        name: "Demo — Base (Polished vertical slice)",
        budgetLow: 35000,
        budgetHigh: 50000,
        timeline: "3–4 months",
        team: "Founder-led + 3–5 contractors",
        summary: `
          <p style="margin:0 0 8px; color:var(--muted); font-size:13px">
            Publisher- and festival-ready demo: higher polish, better UX, and stronger marketing assets to raise conversion.
          </p>
          <ul class="list">
            <li>More refined art/animation, better onboarding, stronger UX</li>
            <li>Trailer + key art suitable for Steam events</li>
          </ul>
        `,
        lines: [
          { cat: "Labor (Dev + Design)", low: 15000, high: 22000, note: "Systems + polish" },
          { cat: "Labor (2D Art + UI/UX)", low: 9000, high: 14000, note: "Fidelity bump" },
          { cat: "Audio (contract)", low: 1500, high: 2500, note: "SFX + music pass" },
          { cat: "QA (contract)", low: 1500, high: 2500, note: "Test cycles" },
          { cat: "Tools / Software", low: 1200, high: 1800, note: "Licenses/assets" },
          { cat: "Marketing / Trailer / Key Art", low: 2600, high: 5600, note: "Pitch-ready" },
          { cat: "Overhead + Contingency", low: 4200, high: 6100, note: "10–15% buffer" },
        ],
        callout: "Best for: Steam Next Fest readiness and higher conversion assets.",
        note: "These numbers are designed to be credible to investors: lean scope, explicit marketing, explicit contingency."
      },
    ];

    const fullGameScenarios = [
      {
        id: "full_conservative",
        name: "Full Game — Conservative",
        budgetLow: 130000,
        budgetHigh: 160000,
        timeline: "12 months",
        team: "2–4 core + contractors",
        summary: `
          <p style="margin:0 0 8px; color:var(--muted); font-size:13px">
            Capital-efficient commercial release: controlled content scope with strong loop and polish.
          </p>
          <ul class="list">
            <li>PC-first launch, limited biomes, tight progression loop</li>
            <li>Lean but deliberate marketing beats</li>
          </ul>
        `,
        lines: [
          { cat: "Labor (Programming)", low: 40000, high: 52000, note: "Core systems" },
          { cat: "Labor (2D Art + Animation)", low: 30000, high: 40000, note: "Content throughput" },
          { cat: "Labor (Design / Production)", low: 15000, high: 20000, note: "Schedule/scope control" },
          { cat: "Audio (contract)", low: 5000, high: 6500, note: "SFX + music" },
          { cat: "QA (contract)", low: 6000, high: 8000, note: "Launch readiness" },
          { cat: "Tools / Infrastructure", low: 3500, high: 5000, note: "Licenses/hosting" },
          { cat: "Marketing & Launch", low: 10000, high: 15000, note: "Trailer + key art + outreach" },
          { cat: "Overhead + Contingency", low: 20500, high: 33500, note: "Ops + 10–15% buffer" },
        ],
        callout: "Best for: shipping a credible indie release with minimal external capital.",
        note: "Full game budgeting assumes founder contribution and contractor-based staffing flexibility."
      },
      {
        id: "full_base",
        name: "Full Game — Base (Recommended)",
        budgetLow: 160000,
        budgetHigh: 210000,
        timeline: "12–18 months",
        team: "3–6 core + contractors",
        summary: `
          <p style="margin:0 0 8px; color:var(--muted); font-size:13px">
            Balanced approach: stronger content depth, more polish runway, and improved market readiness.
          </p>
          <ul class="list">
            <li>More content variety, better UX, more stable QA runway</li>
            <li>Marketing assets strong enough for consistent store conversion</li>
          </ul>
        `,
        lines: [
          { cat: "Labor (Programming)", low: 52000, high: 60000, note: "Systems + tooling" },
          { cat: "Labor (2D Art + Animation)", low: 40000, high: 45000, note: "More breadth" },
          { cat: "Labor (Design / Production)", low: 20000, high: 25000, note: "Milestone gates" },
          { cat: "Audio (contract)", low: 6500, high: 8000, note: "Higher quality pass" },
          { cat: "QA (contract)", low: 8000, high: 10000, note: "More testing cycles" },
          { cat: "Tools / Infrastructure", low: 5000, high: 7000, note: "Licenses/hosting" },
          { cat: "Marketing & Launch", low: 15000, high: 21000, note: "Trailer + PR + outreach" },
          { cat: "Overhead + Contingency", low: 13500, high: 33000, note: "Ops + 10–15% buffer" },
        ],
        callout: "Best for: sustainable indie success with a realistic break-even threshold.",
        note: "Ranges are conservative; swap in vendor quotes when available."
      },
    ];

    // ----------
    // UI STATE
    // ----------
    const tabDemo = document.getElementById("tab-demo");
    const tabFull = document.getElementById("tab-full");
    const scenarioSelect = document.getElementById("scenario");

    const kpiBudget = document.getElementById("kpiBudget");
    const kpiTimeline = document.getElementById("kpiTimeline");
    const kpiTeam = document.getElementById("kpiTeam");

    const summary = document.getElementById("summary");
    const lines = document.getElementById("lines");
    const callout = document.getElementById("callout");
    const note = document.getElementById("note");

    // Forecast UI
    const f_price = document.getElementById("f_price");
    const f_platform = document.getElementById("f_platform");
    const f_mktpct = document.getElementById("f_mktpct");
    const f_mktfixed = document.getElementById("f_mktfixed");
    const f_m1 = document.getElementById("f_m1");
    const f_decay = document.getElementById("f_decay");
    const f_spread = document.getElementById("f_spread");
    const f_rows = document.getElementById("f_rows");
    const f_summary = document.getElementById("f_summary");
    const f_csv = document.getElementById("f_csv");

    let mode = "demo"; // demo | full
    let currentScenario = null;

    function setMode(nextMode){
      mode = nextMode;
      tabDemo.setAttribute("aria-selected", mode === "demo");
      tabFull.setAttribute("aria-selected", mode === "full");

      scenarioSelect.innerHTML = "";
      const data = mode === "demo" ? demoScenarios : fullGameScenarios;

      data.forEach(s => {
        const opt = document.createElement("option");
        opt.value = s.id;
        opt.textContent = s.name;
        scenarioSelect.appendChild(opt);
      });

      scenarioSelect.selectedIndex = 0;
      render();
    }

    function render(){
      const data = mode === "demo" ? demoScenarios : fullGameScenarios;
      const s = data.find(x => x.id === scenarioSelect.value) || data[0];
      currentScenario = s;

      kpiBudget.textContent = `${money(s.budgetLow)} – ${money(s.budgetHigh)}`;
      kpiTimeline.textContent = s.timeline;
      kpiTeam.textContent = s.team;

      summary.innerHTML = s.summary;

      lines.innerHTML = "";
      s.lines.forEach(row => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${row.cat}</td>
          <td class="money">${money(row.low)}</td>
          <td class="money">${money(row.high)}</td>
          <td style="color:var(--muted); font-size:12px">${row.note || ""}</td>
        `;
        lines.appendChild(tr);
      });

      callout.textContent = s.callout;
      note.textContent = s.note;

      // Adjust fixed marketing default based on mode (demo usually smaller)
      if(mode === "demo"){
        if(Number(f_mktfixed.value) > 8000) f_mktfixed.value = 5000;
      }else{
        if(Number(f_mktfixed.value) < 8000) f_mktfixed.value = 10000;
      }

      renderForecast();
    }

    tabDemo.addEventListener("click", () => setMode("demo"));
    tabFull.addEventListener("click", () => setMode("full"));
    scenarioSelect.addEventListener("change", render);

    // ----------
    // Forecasting
    // ----------
    function mny(n){
      if(!isFinite(n)) return "—";
      return "$" + Math.round(n).toLocaleString("en-US");
    }
    function clamp(n,a,b){ return Math.min(b, Math.max(a,n)); }
    function pct(v){ return clamp(Number(v)||0, 0, 100)/100; }

    function buildForecastRows(mult){
      const price = Math.max(0, Number(f_price.value) || 0);
      const platform = pct(f_platform.value);
      const mktpct = pct(f_mktpct.value);
      const fixedMkt = Math.max(0, Number(f_mktfixed.value) || 0);

      const m1Units = Math.max(0, Number(f_m1.value) || 0) * mult;
      const decay = pct(f_decay.value);

      const rows = [];
      let units = m1Units;
      let cumNet = 0;

      for(let i=0;i<12;i++){
        const monthLabel = `M${i+1}`;
        const gross = units * price;
        const marketing = (gross * mktpct) + (i===0 ? fixedMkt : 0);
        const net = Math.max(0, (gross * (1 - platform)) - marketing);
        cumNet += net;

        rows.push({ month: monthLabel, units, gross, marketing, net, cumNet });
        units = units * (1 - decay);
      }
      return rows;
    }

    function firstBreakEvenMonth(rows, target){
      for(let i=0;i<rows.length;i++){
        if(rows[i].cumNet >= target) return i+1;
      }
      return null;
    }

    function renderForecast(){
      if(!currentScenario) return;

      const s = currentScenario;
      const spread = pct(f_spread.value);
      const lowMult = 1 - spread;
      const baseMult = 1;
      const highMult = 1 + spread;

      const lowRows = buildForecastRows(lowMult);
      const baseRows = buildForecastRows(baseMult);
      const highRows = buildForecastRows(highMult);

      const total = (rows, key) => rows.reduce((a,r)=>a+(r[key]||0),0);
      const baseGross = total(baseRows, "gross");
      const baseMkt = total(baseRows, "marketing");
      const baseNet = total(baseRows, "net");

      const beLow = firstBreakEvenMonth(baseRows, s.budgetLow);
      const beHigh = firstBreakEvenMonth(baseRows, s.budgetHigh);

      // approximate units to recoup using per-unit net estimate (ignores fixed marketing)
      const price = Math.max(0, Number(f_price.value) || 0);
      const platform = pct(f_platform.value);
      const mktpct = pct(f_mktpct.value);
      const perUnitNetApprox = Math.max(0.01, (price * (1 - platform)) * (1 - mktpct));
      const unitsLow = Math.ceil(s.budgetLow / perUnitNetApprox);
      const unitsHigh = Math.ceil(s.budgetHigh / perUnitNetApprox);

      f_summary.innerHTML = `<strong>Summary (Base scenario, 12 months):</strong>
        Gross <b>${mny(baseGross)}</b> • Marketing <b>${mny(baseMkt)}</b> • Net <b>${mny(baseNet)}</b><br/>
        <strong>Break-even (vs selected budget):</strong> ${beLow ? `~Month ${beLow} (low)` : "Not reached (low)"} / ${beHigh ? `~Month ${beHigh} (high)` : "Not reached (high)"}<br/>
        <strong>Units to recoup (approx):</strong> ${unitsLow.toLocaleString("en-US")} – ${unitsHigh.toLocaleString("en-US")} units
        <span style="color:var(--muted);"> (per-unit net estimate; fixed marketing handled in monthly table)</span>`;

      f_rows.innerHTML = "";
      function addBlock(label, rows){
        rows.forEach(r=>{
          const target = s.budgetLow;
          const status = r.cumNet >= target ? "Yes" : "No";
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${r.month}</td>
            <td><b>${label}</b></td>
            <td class="money">${Math.round(r.units).toLocaleString("en-US")}</td>
            <td class="money">${mny(r.gross)}</td>
            <td class="money">${mny(r.marketing)}</td>
            <td class="money">${mny(r.net)}</td>
            <td class="money">${mny(r.cumNet)}</td>
            <td style="color:var(--muted); font-size:12px">${status}</td>
          `;
          f_rows.appendChild(tr);
        });
      }
      addBlock("Low", lowRows);
      addBlock("Base", baseRows);
      addBlock("High", highRows);
    }

    function exportForecastCSV(){
      if(!currentScenario) return;
      const s = currentScenario;

      const spread = pct(f_spread.value);
      const scenarios = [
        { name:"Low", mult:1-spread },
        { name:"Base", mult:1 },
        { name:"High", mult:1+spread }
      ];

      const rows = [];
      rows.push(["Month","Scenario","Units","Gross","Marketing","Net","CumulativeNet","BudgetLow","BudgetHigh"]);

      scenarios.forEach(sc=>{
        const data = buildForecastRows(sc.mult);
        data.forEach(r=>{
          rows.push([
            r.month,
            sc.name,
            Math.round(r.units),
            Math.round(r.gross),
            Math.round(r.marketing),
            Math.round(r.net),
            Math.round(r.cumNet),
            s.budgetLow,
            s.budgetHigh
          ]);
        });
      });

      const csv = rows.map(r=>r.join(",")).join("\n");
      const blob = new Blob([csv], {type:"text/csv;charset=utf-8;"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "last_light_forecast_12mo.csv";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    [f_price,f_platform,f_mktpct,f_mktfixed,f_m1,f_decay,f_spread].forEach(el=>{
      el.addEventListener("input", renderForecast);
      el.addEventListener("change", renderForecast);
    });
    f_csv.addEventListener("click", exportForecastCSV);


    // ----------
    // Hotdog Hustler → Last Light (Inbound funding estimator)
    // ----------
    (function(){
      const $ = (id) => document.getElementById(id);
      const studioRev = $("llhh_studioRev");
      const alloc = $("llhh_alloc");
      const target = $("llhh_target");

      // If section isn't present, exit safely
      if(!studioRev || !alloc || !target) return;

      const toLL = $("llhh_toLL");
      const gap = $("llhh_gap");
      const status = $("llhh_status");

      function money0(n){
        if(n === null || n === undefined || !isFinite(n)) return "—";
        return "$" + Math.round(n).toLocaleString("en-US");
      }

      function render(){
        const sr = Math.max(0, Number(studioRev.value) || 0);
        const a = Math.min(100, Math.max(0, Number(alloc.value) || 0)) / 100;
        const t = Math.max(0, Number(target.value) || 0);

        const allocated = sr * a;
        const g = Math.max(0, t - allocated);

        toLL.textContent = money0(allocated);
        gap.textContent = money0(g);

        if(allocated >= t){
          status.textContent = "Gate Met";
          status.style.color = "var(--good)";
        } else {
          status.textContent = "Not Yet";
          status.style.color = "var(--warn)";
        }
      }

      [studioRev, alloc, target].forEach(el=>{
        el.addEventListener("input", render);
        el.addEventListener("change", render);
      });

      render();
    })();

    // init
    setMode("demo");
  </script>
</body>
</html>
